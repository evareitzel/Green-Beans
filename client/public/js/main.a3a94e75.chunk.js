(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{22:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(23),a=n.n(r),s=n(6),o=n(4),l=n(12),i=n(3),j=(n(22),n(1));var u=function(e){var t=e.setWalletKey,n=e.onDarkModeClick,c=e.isDarkMode;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("nav",{className:"navbar",children:[Object(j.jsx)(l.b,{to:"/",className:"logo",children:"Green \ud83c\udf31 Beans"}),Object(j.jsx)(l.b,{to:"/cryptos",className:"nav-link",children:"Cryptos"}),Object(j.jsxs)("button",{onClick:n,className:"small-button",children:[c?"Dark":"Light"," Mode"]}),Object(j.jsx)("button",{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&t(null)}))},className:"ghost-button",children:"Logout"})]})})};var b=function(e){var t=e.onLogin,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(""),i=Object(o.a)(l,2),u=i[0],b=i[1],d=Object(c.useState)([]),h=Object(o.a)(d,2),O=h[0],f=h[1];return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f([]),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_key:a,password:u})}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return f(e.errors)}))}))},className:"form",children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsxs)("label",{children:["Wallet Key",Object(j.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"text",className:"form-input"})]})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{value:u,onChange:function(e){return b(e.target.value)},type:"password",className:"form-input"})]})}),Object(j.jsx)("div",{className:"button-wrapper",children:Object(j.jsx)("button",{type:"submit",className:"button",children:"Log In"})}),O.map((function(e){return Object(j.jsxs)("div",{className:"error",children:["\ud83d\uddd9 ",e]},e)}))]})};var d=function(e){var t=e.onLogin,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(""),i=Object(o.a)(l,2),u=i[0],b=i[1],d=Object(c.useState)([]),h=Object(o.a)(d,2),O=h[0],f=h[1];return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f([]),fetch("/create-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_key:a,password:u})}).then((function(e){e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){return f(e.errors)}))}))},className:"form",children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsxs)("label",{children:["Wallet Key",Object(j.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"text",autoComplete:"off",className:"form-input"})]})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsxs)("label",{children:["Password",Object(j.jsx)("input",{value:u,onChange:function(e){return b(e.target.value)},type:"password",className:"form-input"})]})}),Object(j.jsx)("div",{className:"button-wrapper",children:Object(j.jsx)("button",{type:"submit",className:"button",children:"Create Account"})}),O.map((function(e){return Object(j.jsxs)("div",{className:"error",children:["\ud83d\uddd9 ",e]},e)}))]})};var h=function(e){var t=e.onLogin,n=Object(c.useState)(!0),r=Object(o.a)(n,2),a=r[0],s=r[1];return Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)("h1",{className:"logo",children:"Green \ud83c\udf31 Beans"}),a?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(b,{onLogin:t}),Object(j.jsx)("hr",{className:"hr"}),Object(j.jsxs)("p",{children:["Don't have an account yet? \xa0",Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){return s(!1)},className:"ghost-button",children:"Create Account"})]})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d,{onLogin:t}),Object(j.jsx)("hr",{className:"hr"}),Object(j.jsxs)("p",{children:["Already have an account? \xa0",Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){return s(!0)},className:"ghost-button",children:"Log In"})]})]})]})};var O=function(e){var t=e.walletcrypto,n=e.onDeleteWalletcrypto,r=t.crypto,a=t.id,s=Object(c.useState)([]),l=Object(o.a)(s,2),i=l[0],u=l[1],b=Object(c.useState)(t.quantity),d=Object(o.a)(b,2),h=d[0],O=d[1],f=Object(c.useState)(t.quantity*t.crypto.price),p=Object(o.a)(f,2),m=p[0],x=p[1];return Object(j.jsxs)("li",{className:"card",children:[Object(j.jsx)("h2",{children:r.name}),Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:r.symbol})," $",r.price]}),Object(j.jsxs)("p",{className:"total",children:["$",(100*m/100).toFixed(2)]}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u([]),fetch("/walletcryptos/".concat(a),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:h,total:h*r.price})}).then((function(e){e.ok?e.json().then((function(e){return x(e.total)})):e.json().then((function(e){return u(e.errors)}))}))},children:[Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsxs)("label",{children:["Quantity",Object(j.jsx)("input",{value:h,onChange:function(e){return O(e.target.value)},type:"text",className:"quantity-input"})]}),Object(j.jsx)("button",{type:"submit",className:"update-button",children:"Update"})]}),i.map((function(e){return Object(j.jsxs)("div",{className:"error",children:["\ud83d\uddd9 ",e]},e)}))]}),Object(j.jsx)("button",{onClick:function(){fetch("/walletcryptos/".concat(a),{method:"DELETE"}),n(t)},className:"small-button",children:"Remove"})]},r.id)};var f=function(e){var t=e.wallet,n=e.cryptos,r=e.onAddWalletcrypto,a=Object(c.useState)("100"),s=Object(o.a)(a,2),l=s[0],i=s[1],u=Object(c.useState)("1"),b=Object(o.a)(u,2),d=b[0],h=b[1],O=Object(c.useState)([]),f=Object(o.a)(O,2),p=f[0],m=f[1];if(!n)return Object(j.jsx)("h1",{children:"Loading..."});var x=n.map((function(e){return Object(j.jsxs)("option",{value:e.id,children:[e.symbol," \u2022 $",e.price]},e.id)}));return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m([]),fetch("/walletcryptos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_id:t.id,crypto_id:d,quantity:l})}).then((function(e){e.ok?e.json().then((function(e){return r(e)})):e.json().then((function(e){return m(e.errors)}))})),i("100")},className:"form",children:[Object(j.jsx)("h2",{children:"Add to Wallet"}),Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsx)("label",{children:"Crypto"}),Object(j.jsx)("select",{onChange:function(e){return h(e.target.value)},className:"form-input",children:x})]}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsxs)("label",{children:["Quantity",Object(j.jsx)("input",{value:l,onChange:function(e){return i(e.target.value)},type:"text",className:"form-input"})]})}),Object(j.jsx)("button",{className:"button",type:"submit",children:"Add to Wallet"}),p.map((function(e){return Object(j.jsxs)("div",{className:"error",children:["\ud83d\uddd9 ",e]},e)}))]})};var p=function(e){var t=e.walletKey,n=e.wallet,c=e.cryptos,r=e.walletcryptos,a=e.onAddWalletcrypto,s=e.onDeleteWalletcrypto;if(!r)return Object(j.jsx)("h2",{children:"Loading..."});var o=r.map((function(e){return Object(j.jsx)(O,{walletcrypto:e,onDeleteWalletcrypto:s},e.id)}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"My Cryptos"}),Object(j.jsxs)("h3",{children:["Wallet Key ",t]}),0===r.length?Object(j.jsxs)("p",{children:["There are no cryptos in your wallet \ud83e\udd7a",Object(j.jsx)("br",{})]}):Object(j.jsx)("ul",{className:"list",children:o}),Object(j.jsx)(f,{wallet:n,cryptos:c,onAddWalletcrypto:a})]})};var m=function(e){var t=e.onAddCrypto,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(""),i=Object(o.a)(l,2),u=i[0],b=i[1],d=Object(c.useState)(""),h=Object(o.a)(d,2),O=h[0],f=h[1],p=Object(c.useState)([]),m=Object(o.a)(p,2),x=m[0],y=m[1];return Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),y([]),fetch("cryptos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:a,name:u,price:O})}).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),s(""),b(""),f("")):e.json().then((function(e){return y(e.errors)}))}))},children:[Object(j.jsx)("h2",{children:"Import new crypto"}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"text",className:"form-input",placeholder:"Symbol"})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{value:u,onChange:function(e){return b(e.target.value)},type:"text",className:"form-input",placeholder:"Name"})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{value:O,onChange:function(e){return f(e.target.value)},type:"text",className:"form-input",placeholder:"Price"})}),Object(j.jsx)("button",{type:"submit",className:"button",children:"Import new crypto"}),x.map((function(e){return Object(j.jsxs)("div",{className:"error",children:["\ud83d\uddd9 ",e]},e)}))]})};var x=function(e){var t=e.cryptos,n=e.onAddCrypto,c=t.map((function(e){return Object(j.jsxs)("li",{className:"list-item",children:[Object(j.jsx)("strong",{children:e.symbol})," | ",e.name," $",e.price,e.wallets.map((function(e){return"\u2b50"})).join("")]},e.id)}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("ul",{className:"list",children:c}),Object(j.jsx)(m,{onAddCrypto:n})]})};var y=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),b=Object(o.a)(a,2),d=b[0],O=b[1],f=Object(c.useState)(null),m=Object(o.a)(f,2),y=m[0],v=m[1],N=Object(c.useState)(null),g=Object(o.a)(N,2),w=g[0],S=g[1],C=Object(c.useState)(!0),k=Object(o.a)(C,2),D=k[0],W=k[1];return Object(c.useEffect)((function(){fetch("/wallet").then((function(e){e.ok&&e.json().then((function(e){return r(e.wallet_key)}))}))}),[]),Object(c.useEffect)((function(){fetch("/wallet").then((function(e){return e.json()})).then((function(e){return O(e)}))}),[]),Object(c.useEffect)((function(){fetch("/cryptos").then((function(e){return e.json()})).then((function(e){return v(e)}))}),[d,w]),Object(c.useEffect)((function(){fetch("/wallet").then((function(e){return e.json()})).then((function(e){return S(e.walletcryptos)}))}),[]),n?Object(j.jsx)("main",{className:"wrapper "+(D?"dark":"light"),children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(u,{walletKey:n,setWalletKey:r,onDarkModeClick:function(){W((function(e){return!e}))},isDarkMode:D}),Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/",element:Object(j.jsx)(p,{walletKey:n,wallet:d,cryptos:y,walletcryptos:w,onAddWalletcrypto:function(e){S([].concat(Object(s.a)(w),[e]))},onDeleteWalletcrypto:function(e){var t=w.filter((function(t){return t.id!==e.id}));S(t)}})}),Object(j.jsx)(i.a,{path:"/cryptos",element:Object(j.jsx)(x,{walletKey:n,wallet:d,cryptos:y,onAddCrypto:function(e){v([].concat(Object(s.a)(y),[e]))}})})]})]})}):Object(j.jsx)(h,{onLogin:function(e){r(e.wallet_key),O(e)}})};n(30);a.a.render(Object(j.jsx)(y,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a3a94e75.chunk.js.map